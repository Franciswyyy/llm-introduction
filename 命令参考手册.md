# 命令参考手册

## 📋 目录
1. [Python环境管理](#python环境管理)
2. [虚拟环境操作](#虚拟环境操作)
3. [包管理命令](#包管理命令)
4. [文件和目录操作](#文件和目录操作)
5. [Git版本控制](#git版本控制)
6. [项目启动流程](#项目启动流程)
7. [故障排除命令](#故障排除命令)

---

## Python环境管理

### 查看Python版本和路径
```bash
# 查看Python3版本
python3 --version

# 查看Python3安装路径
which python3

# 查看Python2版本（如果存在）
python --version
which python

# 查看系统中所有Python版本
ls -la /usr/bin/python*
```

### 检查pip工具
```bash
# 查看pip3版本和路径
pip3 --version
which pip3

# 查看pip版本和路径
pip --version
which pip

# 使用python3模块方式调用pip
python3 -m pip --version
```

---

## 虚拟环境操作

### 创建虚拟环境
```bash
# 创建虚拟环境
python3 -m venv 环境名称

# 示例：创建项目虚拟环境
python3 -m venv llm-introduction-env
```

### 激活虚拟环境
```bash
# macOS/Linux 激活虚拟环境
source 环境名称/bin/activate

# 示例
source llm-introduction-env/bin/activate

# Windows 激活虚拟环境
# 环境名称\Scripts\activate
```

### 停用虚拟环境
```bash
# 停用当前虚拟环境
deactivate
```

### 删除虚拟环境
```bash
# 删除整个虚拟环境文件夹
rm -rf 环境名称

# 示例
rm -rf llm-introduction-env
```

### 检查虚拟环境状态
```bash
# 查看当前是否在虚拟环境中
echo $VIRTUAL_ENV

# 查看当前使用的Python路径
which python
which pip
```

---

## 包管理命令

### 安装包
```bash
# 安装单个包
pip install 包名

# 从requirements.txt安装
pip install -r requirements.txt

# 使用python3 -m pip安装（推荐）
python3 -m pip install 包名
python3 -m pip install -r requirements.txt

# 安装特定版本
pip install 包名==版本号
```

### 查看已安装包
```bash
# 列出所有已安装的包
pip list

# 查看特定包信息
pip show 包名

# 导出当前环境的包列表
pip freeze > requirements.txt
```

### 卸载包
```bash
# 卸载单个包
pip uninstall 包名

# 卸载requirements.txt中的所有包
pip uninstall -r requirements.txt -y
```

---

## 文件和目录操作

### 基本文件操作
```bash
# 查看当前目录
pwd

# 列出文件和目录
ls -la

# 创建目录
mkdir 目录名

# 删除文件
rm 文件名

# 删除目录
rm -rf 目录名

# 移动/重命名文件
mv 源文件 目标文件

# 复制文件
cp 源文件 目标文件

# 查看文件内容
cat 文件名
head -20 文件名  # 查看前20行
tail -20 文件名  # 查看后20行
```

### 权限和重命名操作
```bash
# 修改文件权限
chmod +x 文件名

# 修改文件所有者
chown 用户:组 文件名

# 批量重命名文件
for file in *.old; do mv "$file" "${file%.old}.new"; done
```

---

## Git版本控制

### Git初始化和基本操作
```bash
# 初始化Git仓库
git init

# 查看Git状态
git status

# 添加文件到暂存区
git add 文件名
git add .          # 添加所有文件
git add -A         # 添加所有文件包括删除的

# 提交更改
git commit -m "提交信息"

# 查看提交历史
git log
git log --oneline  # 简洁格式
```

### 远程仓库操作
```bash
# 添加远程仓库
git remote add origin 仓库地址

# 查看远程仓库
git remote -v

# 推送到远程仓库
git push origin main
git push -u origin main  # 首次推送并设置上游

# 拉取远程更新
git pull origin main

# 克隆仓库
git clone 仓库地址
```

### 分支操作
```bash
# 查看分支
git branch

# 创建新分支
git branch 分支名

# 切换分支
git checkout 分支名

# 创建并切换到新分支
git checkout -b 分支名

# 合并分支
git merge 分支名

# 删除分支
git branch -d 分支名
```

### .gitignore文件创建
```bash
# 创建.gitignore文件
cat > .gitignore << 'EOF'
# Python
__pycache__/
*.py[cod]
.env

# 项目特定
datasets/
models/
*-env/
*.png
*.jpg
EOF
```

---

## 项目启动流程

### 完整项目设置流程
```bash
# 1. 创建项目目录
mkdir 项目名
cd 项目名

# 2. 创建虚拟环境
python3 -m venv 项目名-env

# 3. 激活虚拟环境
source 项目名-env/bin/activate

# 4. 安装依赖
pip install -r requirements.txt

# 5. 运行项目
python main.py

# 6. Git初始化（如果需要）
git init
git add .
git commit -m "Initial commit"
```

### 嵌入分类任务启动流程
```bash
# 1. 进入项目目录
cd llm-introduction

# 2. 激活虚拟环境
source llm-introduction-env/bin/activate

# 3. 进入分类任务目录
cd "classification task"

# 4. 安装依赖（如果还没安装）
python3 -m pip install -r requirements.txt

# 5. 运行分类任务
python3 embedding_classification.py
```

---

## 故障排除命令

### 环境问题诊断
```bash
# 检查Python环境
which python
which python3
echo $PATH

# 检查pip环境
which pip
which pip3
pip --version

# 检查虚拟环境
echo $VIRTUAL_ENV
conda info  # 如果使用conda

# 重新生成pip
python3 -m ensurepip --upgrade
```

### 包安装问题
```bash
# 清理pip缓存
pip cache purge

# 使用国内镜像源
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple/ 包名

# 升级pip
python3 -m pip install --upgrade pip

# 强制重新安装
pip install --force-reinstall --no-cache-dir 包名
```

### 权限问题
```bash
# 使用用户安装（避免权限问题）
pip install --user 包名

# 查看用户安装目录
python3 -m site --user-site

# 修复权限
sudo chown -R $(whoami) ~/.local
```

### 系统工具安装
```bash
# 安装Homebrew（macOS）
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# 使用Homebrew安装工具
brew install 工具名

# 卸载Homebrew包
brew uninstall 工具名

# 查看已安装的包
brew list
```

---

## 🔥 常用快捷组合

### 快速项目启动
```bash
cd 项目目录 && source *-env/bin/activate && python3 main.py
```

### 快速Git提交
```bash
git add . && git commit -m "更新内容" && git push
```

### 快速环境重建
```bash
deactivate && rm -rf *-env && python3 -m venv 新环境名 && source 新环境名/bin/activate && pip install -r requirements.txt
```

### 快速查看项目状态
```bash
echo "Python: $(which python)" && echo "Pip: $(which pip)" && echo "Virtual Env: $VIRTUAL_ENV" && echo "Git Status:" && git status --short
```

---

## 📝 注意事项

1. **始终在虚拟环境中工作**：避免污染系统Python环境
2. **使用python3和pip3**：明确指定Python 3
3. **定期更新requirements.txt**：`pip freeze > requirements.txt`
4. **注意文件路径**：使用绝对路径或正确的相对路径
5. **权限问题**：优先使用`--user`安装而不是sudo
6. **备份重要数据**：在删除环境前确保代码已提交到Git 